<!DOCTYPE html>
<html>
<head>
<title>Ú¤Ø±Ú©Ø§ØªØ§Ø¡Ù†â€ŒØ¯Ù„ | perkataandel</title>
<style>
/**/
body {
    background-color: rgb(230, 230, 230);
    color:rgb(50, 50, 50);
    font-family: Dejawivu Sans Mono;
}
/**/
#papanKekunci {
    width: 90%;
    max-width: 900px;
    font-size: 3em;
}
td{
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently */
    border: 1px solid;
    text-align: center;
    vertical-align: middle;
}
td.input:hover{
    background-color:rgb(180,180,180);
}
button:active{
    background-color:rgb(180,180,180);
}

#tebakan {
    max-width: 700px;
}
td.tebakan {
    padding: 0px;
    width: 1em;
    height: 1em;
    font-size:4em;
    font-family: DejawiVu Sans Mono;
}
td.input > button {
    width: 100%;
    height: 100%;
    font-size:1em;
    border: none;
}

.hijau {
    background-color: rgb(50, 210, 30);
}
.kuning {
    background-color: rgb(190, 190, 30);
}
.gagal {
    background-color: rgb(160, 160, 160);
}

#togol {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 1.5em;
}

button {
    font-family: Noto Naskh Arabic;
    background-color: transparent;
}

@media only screen and (max-device-width: 768px) {
    h1 {
        font-size: 5em;
    }

    #tebakan {
        width: 80%;
        margin-top: 5em;
    }
    td{
        border: 2px solid;
    }
    td.tebakan {
        padding: 0px;
        overflow: hidden;
        width: 3em;
        height: 3em;
        border: 3px solid;
        font-size:6em;
        font-family: DejawiVu Sans Mono;
    }
    #papanKekunci {
        width: 100%;
        font-size: 4em;
        position: absolute;
        bottom: 100px;
        right: 30px;
    }

    #togol {
        font-size: 2.5em;
    }
}
</style>
</head>

<body dir=rtl>

<main id="permainan"><center>
<header>
    <h1>Ú©Ø§ØªØ§Ø¯Ù„</h1>
    <h1 style="display:none">perkataandel wordle dalam aksara jawi | wordle in jawi</h1>

    <button id="togol" onclick="togol_kecerahan()">ğŸŒ— Ø³ÙŠØ§Ú /Ù…Ø§Ù„Ù…</button>
</header>

<br/>

<table id="tebakan">

</table>

<br/><br/>

<table id="papanKekunci">
    <tr>
        <td class="input"><button id="Ø§" onclick="tekan_butang('Ø§')">Ø§</button></td>
        <td class="input"><button id="Ø¨" onclick="tekan_butang('Ø¨')">Ø¨</button></td>
        <td class="input"><button id="Øª" onclick="tekan_butang('Øª')">Øª</button></td>
        <td class="input"><button id="Ø©" onclick="tekan_butang('Ø©')">Ø©</button></td>
        <td class="input"><button id="Ø«" onclick="tekan_butang('Ø«')">Ø«</button></td>
        <td class="input"><button id="Ø¬" onclick="tekan_butang('Ø¬')">Ø¬</button></td>
        <td class="input"><button id="Ú†" onclick="tekan_butang('Ú†')">Ú†</button></td>
        <td class="input"><button id="Ø­" onclick="tekan_butang('Ø­')">Ø­</button></td>
        <td class="input"><button id="Ø®" onclick="tekan_butang('Ø®')">Ø®</button></td>
        <td class="input" onclick="hapus_satu_aksara()">âŒ¦</td>
    </tr>
    <tr>
        <td class="input"><button id="Ø¯" onclick="tekan_butang('Ø¯')">Ø¯</button></td>
        <td class="input"><button id="Ø°" onclick="tekan_butang('Ø°')">Ø°</button></td>
        <td class="input"><button id="Ø±" onclick="tekan_butang('Ø±')">Ø±</button></td>
        <td class="input"><button id="Ø²" onclick="tekan_butang('Ø²')">Ø²</button></td>
        <td class="input"><button id="Ø³" onclick="tekan_butang('Ø³')">Ø³</button></td>
        <td class="input"><button id="Ø´" onclick="tekan_butang('Ø´')">Ø´</button></td>
        <td class="input"><button id="Øµ" onclick="tekan_butang('Øµ')">Øµ</button></td>
        <td class="input"><button id="Ø¶" onclick="tekan_butang('Ø¶')">Ø¶</button></td>
        <td class="input"><button id="Ø·" onclick="tekan_butang('Ø·')">Ø·</button></td>
        <td class="input"><button id="Ø¸" onclick="tekan_butang('Ø¸')">Ø¸</button></td>
    </tr>
    <tr>
        <td class="input"><button id="Ø¹" onclick="tekan_butang('Ø¹')">Ø¹</button></td>
        <td class="input"><button id="Øº" onclick="tekan_butang('Øº')">Øº</button></td>
        <td class="input"><button id="Ú " onclick="tekan_butang('Ú ')">Ú </button></td>
        <td class="input"><button id="Ù" onclick="tekan_butang('Ù')">Ù</button></td>
        <td class="input"><button id="Ú¤" onclick="tekan_butang('Ú¤')">Ú¤</button></td>
        <td class="input"><button id="Ù‚" onclick="tekan_butang('Ù‚')">Ù‚</button></td>
        <td class="input"><button id="Ú©" onclick="tekan_butang('Ú©')">Ú©</button></td>
        <td class="input"><button id="İ¢" onclick="tekan_butang('İ¢')">İ¢</button></td>
        <td class="input"><button id="Ù„" onclick="tekan_butang('Ù„')">Ù„</button></td>
        <td class="input"><button id="Ù…" onclick="tekan_butang('Ù…')">Ù…</button></td>
    </tr>
    <tr>
        <td class="input"><button id="Ù†" onclick="tekan_butang('Ù†')">Ù†</button></td>
        <td class="input"><button id="Ùˆ" onclick="tekan_butang('Ùˆ')">Ùˆ</button></td>
        <td class="input"><button id="Û" onclick="tekan_butang('Û')">Û</button></td>
        <td class="input"><button id="Ù‡" onclick="tekan_butang('Ù‡')">Ù‡</button></td>
        <td class="input"><button id="Ø¡" onclick="tekan_butang('Ù´')">Ø¡</button></td>
        <td class="input"><button id="ÙŠ" onclick="tekan_butang('ÙŠ')">ÙŠ</button></td>
        <td class="input"><button id="Ù‰" onclick="tekan_butang('Ù‰')">Ù‰</button></td>
        <td class="input"><button id="Ú½" onclick="tekan_butang('Ú½')">Ú½</button></td>
        <td class="input" colspan=2 onclick="isi_ulang_tabel(1)">Ù…Ø§Ø³ÙˆÙ‚</td>
    </tr>
</table>
<!--<p id="uji" style="font-size:2em;display:none;"></p>-->
</center>
</main>






<script src="senarai_perkataan.js"></script>
<!-- gerbangnya, ditabang,  -->
<!--c Ú†Ø¨Ø§Ø¯Ù‚â¹ Ø§  -->
<script>
var nombor_perkataan = 0;
var tebakan_perkataan = ["","","","","",""];
var RODA = "Ù¢ï»»Ø±Ø²ÙˆÛØ¯Ø°Ø£Ø¥Ø§Ù´Ø¡Ø©";

var senaraiPerkataan = kata.split("\t");
var perkataanRahsia = senaraiPerkataan[Math.floor(Math.random() * senaraiPerkataan.length)]

function hapus_satu_aksara() {
    tebakan_perkataan[nombor_perkataan] = tebakan_perkataan[nombor_perkataan].substr(0,tebakan_perkataan[nombor_perkataan].length-1);
    //document.getElementById('uji').innerText = tebakan_perkataan;
    isi_ulang_tabel();
}

function tekan_butang(kekunci) {
    if (tebakan_perkataan[nombor_perkataan].length < 5) {

        tebakan_perkataan[nombor_perkataan] += kekunci;

        if (tebakan_perkataan[nombor_perkataan].includes('Ù„Ø§')) {
             tebakan_perkataan[nombor_perkataan] =  tebakan_perkataan[nombor_perkataan].replace('Ù„Ø§', 'ï»»');
        }
    } else {
        alert('Terlalu banyak huruf!');
    }
    //document.getElementById('uji').innerText = tebakan_perkataan;
    isi_ulang_tabel();
}
function isi_ulang_tabel(masuk=0) {
    var x = document.getElementById("tebakan");
    output = "";

    var kekunciGagal = [];
    var kekunciKuning = [];
    var kekunciHijau = [];

    if (masuk && !senaraiPerkataan.includes(tebakan_perkataan[nombor_perkataan])) {
        if (senaraiPerkataan.includes(tebakan_perkataan[nombor_perkataan].replace('Ø§', 'Ø£'))) {
            tebakan_perkataan[nombor_perkataan] = tebakan_perkataan[nombor_perkataan].replace('Ø§', 'Ø£');
        } else if (senaraiPerkataan.includes(tebakan_perkataan[nombor_perkataan].replace('Ø§', 'Ø¥'))) {
            tebakan_perkataan[nombor_perkataan] = tebakan_perkataan[nombor_perkataan].replace('Ø§', 'Ø¥');
        }
        alert("perkataan bukan dalam senarai");
        return 0;
    } else if (masuk) {
        if (tebakan_perkataan[nombor_perkataan].length == 5) {
            nombor_perkataan+=1;
        } else {
            alert("Tak cukup huruf!")
        }
    }
    for (i=0; i<tebakan_perkataan.length; i++) {
        output += "<tr>";

        kira_warna = new Map();
        for (var h of new Set(tebakan_perkataan[i])) {
            kira_warna.set(h, 0)
        }
        for (j=0; j<5; j++) {
            huruf = tebakan_perkataan[i][j];
            if (huruf == perkataanRahsia[j]) {
                kira_warna.set(huruf, kira_warna.get(huruf) + 1)
            }
        }



        for (j=0; j<5; j++) {
            huruf = tebakan_perkataan[i][j];
            huruf_asli = huruf;

            if (huruf == undefined) {output += `<td id="${i}_${j}" class="tebakan"> </td>`}

            warna = 0
            if (huruf == perkataanRahsia[j]) {
                warna = 2;
            }
            else if (kira_warna.get(huruf) < perkataanRahsia.split(huruf).length - 1) {
                warna = 1;
                kira_warna.set(huruf, kira_warna.get(huruf) + 1);
            }

            if (huruf == 'ï»»') {huruf = 'Ù„Ø§'}

            if (huruf != undefined) {
                if ('Ù´Ø¡Ù¢'.includes(tebakan_perkataan[i][j+1])) {
                    huruf = huruf + '\u200c';
                }

                /* Cek harus tambah ZWNJ atau ZWJ */
                if (j == 0 && tebakan_perkataan[i].length == 1) {
                    huruf = huruf + '\u200c';
                }
                else if (j == 0 && tebakan_perkataan[i].length > 1) {
                    huruf = huruf + '\u200d';
                }
                else if (j == tebakan_perkataan[i].length-1) {
                    if (RODA.includes(tebakan_perkataan[i][j-1])) {
                        huruf = '\u200c' + huruf + '\u200c';
                    } else {
                        huruf = '\u200d' + huruf + '\u200c';
                    }
                }
                else if (tebakan_perkataan[i].length > j) {
                    if (RODA.includes(tebakan_perkataan[i][j-1])) {
                        huruf = '\u200c' + huruf;
                    } else {
                        huruf = '\u200d' + huruf;
                    }
                }
                if (masuk || i < nombor_perkataan) {
                    [kekunciGagal, kekunciKuning, kekunciHijau][warna].push(huruf_asli)
                    if (warna == 0) {
                        output += `<td id="${i}_${j}" class="tebakan gagal">${huruf}â€</td>`;
                    } else if (warna == 1) {
                        output += `<td id="${i}_${j}" class="tebakan kuning">${huruf}â€</td>`;
                    } else if (warna == 2) {
                        output += `<td id="${i}_${j}" class="tebakan hijau">${huruf}â€</td>`;
                    }

                    for(q=0; q<kekunciGagal.length; q++) {
                        tetapKekunciWarna(kekunciGagal[q], 'gagal');
                    }
                    for(q=0; q<kekunciKuning.length; q++) {
                        tetapKekunciWarna(kekunciKuning[q], 'kuning');
                    }
                    for(q=0; q<kekunciHijau.length; q++) {
                        tetapKekunciWarna(kekunciHijau[q], 'hijau');
                    }
                } else {
                    output += `<td id="${i}_${j}" class="tebakan">${huruf}â€</td>`;
                }
            }
        }
        output += "</tr>";
    }
    x.innerHTML = output;

}
function tetapKekunciWarna(id, warna) {
    document.getElementById(id).setAttribute("class", warna);
    if (id == 'Ù´') {document.getElementById("Ø¡").setAttribute("class", warna);}
    if (id == 'Ù„Ø§') {
        document.getElementById("Ù„").setAttribute("class", warna);
        document.getElementById("Ø§").setAttribute("class", warna);
    }
}

function css(selector, property, value) {
    //https://stackoverflow.com/questions/566203/changing-css-values-with-javascript
    for (var i=0; i<document.styleSheets.length;i++) {//Loop through all styles
        //Try add rule
        try { document.styleSheets[i].insertRule(selector+ ' {'+property+':'+value+'}', document.styleSheets[i].cssRules.length);
        } catch(err) {try { document.styleSheets[i].addRule(selector, property+':'+value);} catch(err) {}}//IE
    }
}
function togol_kecerahan() {
    var body = document.getElementsByTagName('body')[0];
    if (body.style.color == "" || body.style.color == "rgb(50, 50, 50)") {
        body.style.color = "rgb(230, 230, 230)";
        body.style.backgroundColor = "rgb(50, 50, 50)";
        css('button', 'color', 'rgb(230, 230, 230)');
    } else {
        body.style.color = "rgb(50, 50, 50)";
        body.style.backgroundColor = "rgb(230, 230, 230)";
        css('button', 'color', 'rgb(50, 50, 50)');
    }
}

isi_ulang_tabel()

this.root.querySelector('#papanKekunci').addEventListener('click', ev => {
    let butang = ev.target;
    if (butang.tagName !== 'BUTTON')
        return;

    let type = butang.getAttribute('data-type');
    if (type === 'huruf') {
        tekan_butang(button.getAttribute('id'));
    }
    else if (type === 'hapus') {
        hapus_satu_aksara()
    }
    else if (type === 'masuk') {
        isi_ulang_tabel(1)
    }
});
</script>
</body>
